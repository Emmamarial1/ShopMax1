{% extends "base.html" %}

{% block title %}Privacy Policy - ShopMax{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="row mb-5">
        <div class="col-lg-10 mx-auto text-center">
            <h1 class="display-4 fw-bold text-primary mb-4">Privacy Policy</h1>
            <p class="lead text-muted">Last updated: December 1, 2024</p>
            <div class="alert alert-info">
                <i class="fas fa-shield-alt me-2"></i>
                Your privacy is important to us. This policy explains how we collect, use, and protect your information.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10 mx-auto">
            <!-- Quick Navigation -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h5 class="card-title">Quick Navigation</h5>
                    <div class="d-flex flex-wrap gap-2">
                        <a href="#introduction" class="btn btn-outline-primary btn-sm">1. Introduction</a>
                        <a href="#information-collected" class="btn btn-outline-primary btn-sm">2. Information Collected</a>
                        <a href="#how-we-use" class="btn btn-outline-primary btn-sm">3. How We Use Info</a>
                        <a href="#data-sharing" class="btn btn-outline-primary btn-sm">4. Data Sharing</a>
                        <a href="#data-security" class="btn btn-outline-primary btn-sm">5. Data Security</a>
                        <a href="#your-rights" class="btn btn-outline-primary btn-sm">6. Your Rights</a>
                        <a href="#cookies" class="btn btn-outline-primary btn-sm">7. Cookies</a>
                        <a href="#retention" class="btn btn-outline-primary btn-sm">8. Data Retention</a>
                    </div>
                </div>
            </div>

            <!-- Privacy Policy Content -->
            <div class="card shadow-lg border-0">
                <div class="card-body p-5">
                    <!-- Introduction -->
                    <section id="introduction" class="mb-5">
                        <h2 class="h4 text-primary mb-3">1. Introduction</h2>
                        <p>Welcome to ShopMax ("we," "our," or "us"). We are committed to protecting your personal information and your right to privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Platform.</p>
                        
                        <div class="alert alert-warning">
                            <strong>Please read carefully:</strong> By using ShopMax, you agree to the collection and use of information in accordance with this Privacy Policy.
                        </div>
                    </section>

                    <!-- Information We Collect -->
                    <section id="information-collected" class="mb-5">
                        <h2 class="h4 text-primary mb-3">2. Information We Collect</h2>
                        
                        <h5 class="mb-3">2.1 Personal Information You Provide</h5>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Information Type</th>
                                        <th>Examples</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Account Information</strong></td>
                                        <td>Full name, email, phone number, location</td>
                                        <td>Account creation and verification</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Profile Information</strong></td>
                                        <td>Profile picture, business details, delivery address</td>
                                        <td>Personalizing your experience</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Seller Information</strong></td>
                                        <td>Business name, NIN, business address, bank details</td>
                                        <td>Seller verification and payouts</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Transaction Information</strong></td>
                                        <td>Order details, payment information, delivery addresses</td>
                                        <td>Processing transactions and deliveries</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Communication Data</strong></td>
                                        <td>Messages with sellers/buyers, support tickets</td>
                                        <td>Facilitating communication and support</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h5 class="mb-3 mt-4">2.2 Information Collected Automatically</h5>
                        <ul>
                            <li><strong>Device Information:</strong> IP address, browser type, device type, operating system</li>
                            <li><strong>Usage Data:</strong> Pages visited, features used, time spent on platform</li>
                            <li><strong>Location Data:</strong> General location based on IP address or GPS (with permission)</li>
                            <li><strong>Cookies and Tracking:</strong> See our <a href="#cookies">Cookies section</a> for details</li>
                        </ul>

                        <h5 class="mb-3">2.3 Information from Third Parties</h5>
                        <p>We may receive information about you from:</p>
                        <ul>
                            <li>Payment processors (mobile money providers, banks)</li>
                            <li>Social media platforms (if you connect your account)</li>
                            <li>Delivery partners and service providers</li>
                            <li>Advertising and analytics partners</li>
                        </ul>
                    </section>

                    <!-- How We Use Your Information -->
                    <section id="how-we-use" class="mb-5">
                        <h2 class="h4 text-primary mb-3">3. How We Use Your Information</h2>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">Service Provision</h6>
                                        <ul class="small">
                                            <li>Create and manage your account</li>
                                            <li>Process transactions and payments</li>
                                            <li>Faciliate buyer-seller communication</li>
                                            <li>Provide customer support</li>
                                            <li>Send order updates and notifications</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">Platform Improvement</h6>
                                        <ul class="small">
                                            <li>Personalize user experience</li>
                                            <li>Develop new features and services</li>
                                            <li>Conduct research and analysis</li>
                                            <li>Improve platform security</li>
                                            <li>Optimize platform performance</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">Communication</h6>
                                        <ul class="small">
                                            <li>Send service-related announcements</li>
                                            <li>Respond to your inquiries</li>
                                            <li>Send promotional communications (with consent)</li>
                                            <li>Notify about policy changes</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 bg-light h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">Legal & Security</h6>
                                        <ul class="small">
                                            <li>Comply with legal obligations</li>
                                            <li>Enforce our Terms of Service</li>
                                            <li>Protect against fraud and abuse</li>
                                            <li>Maintain platform security</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Data Sharing -->
                    <section id="data-sharing" class="mb-5">
                        <h2 class="h4 text-primary mb-3">4. How We Share Your Information</h2>
                        
                        <h5 class="mb-3">4.1 With Other Users</h5>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>When You're a...</th>
                                        <th>What We Share</th>
                                        <th>With Whom</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Buyer</strong></td>
                                        <td>Name, delivery address, contact info</td>
                                        <td>Sellers you purchase from</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Seller</strong></td>
                                        <td>Business name, contact info, ratings</td>
                                        <td>Potential buyers and platform users</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h5 class="mb-3 mt-4">4.2 With Service Providers</h5>
                        <p>We share information with third-party vendors who help us operate the platform:</p>
                        <ul>
                            <li><strong>Payment Processors:</strong> Mobile money providers, banks for transaction processing</li>
                            <li><strong>Delivery Partners:</strong> Boda boda riders, delivery services for order fulfillment</li>
                            <li><strong>Cloud Services:</strong> Hosting providers for data storage and processing</li>
                            <li><strong>Analytics Services:</strong> To understand platform usage and improve services</li>
                        </ul>

                        <h5 class="mb-3">4.3 Legal Requirements</h5>
                        <p>We may disclose your information when required by law or to:</p>
                        <ul>
                            <li>Comply with legal processes or government requests</li>
                            <li>Protect our rights, privacy, safety, or property</li>
                            <li>Enforce our Terms of Service</li>
                            <li>Prevent fraud, security, or technical issues</li>
                        </ul>

                        <h5 class="mb-3">4.4 Business Transfers</h5>
                        <p>In the event of a merger, acquisition, or sale of assets, your information may be transferred to the new entity, subject to the same Privacy Policy.</p>
                    </section>

                    <!-- Data Security -->
                    <section id="data-security" class="mb-5">
                        <h2 class="h4 text-primary mb-3">5. Data Security</h2>
                        
                        <div class="alert alert-success">
                            <i class="fas fa-lock me-2"></i>
                            <strong>We take your security seriously.</strong> We implement appropriate technical and organizational measures to protect your personal information.
                        </div>

                        <h5 class="mb-3">5.1 Security Measures</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <ul>
                                    <li>SSL encryption for data transmission</li>
                                    <li>Secure servers with firewalls</li>
                                    <li>Regular security assessments</li>
                                    <li>Access controls and authentication</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul>
                                    <li>Data encryption at rest</li>
                                    <li>Regular security training for staff</li>
                                    <li>Incident response procedures</li>
                                    <li>Secure payment processing</li>
                                </ul>
                            </div>
                        </div>

                        <h5 class="mb-3">5.2 Your Role in Security</h5>
                        <p>While we implement robust security measures, you also play a role in protecting your information:</p>
                        <ul>
                            <li>Use a strong, unique password for your account</li>
                            <li>Don't share your login credentials with others</li>
                            <li>Log out of shared devices</li>
                            <li>Keep your device security software updated</li>
                            <li>Be cautious of phishing attempts</li>
                        </ul>

                        <h5 class="mb-3">5.3 Data Breach Procedures</h5>
                        <p>In the unlikely event of a data breach, we will:</p>
                        <ul>
                            <li>Notify affected users within 72 hours</li>
                            <li>Inform relevant authorities as required by law</li>
                            <li>Take immediate steps to contain the breach</li>
                            <li>Provide guidance on protective measures</li>
                        </ul>
                    </section>

                    <!-- Your Rights -->
                    <section id="your-rights" class="mb-5">
                        <h2 class="h4 text-primary mb-3">6. Your Rights and Choices</h2>
                        
                        <p>You have the following rights regarding your personal information:</p>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="card border-primary h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">üìù Access and Correction</h6>
                                        <p class="small">You can access and update your personal information through your account settings at any time.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card border-primary h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">üóëÔ∏è Data Deletion</h6>
                                        <p class="small">You can request deletion of your account and personal data, subject to legal retention requirements.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card border-primary h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">üìß Marketing Preferences</h6>
                                        <p class="small">You can opt-out of marketing communications at any time using the unsubscribe link in our emails.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card border-primary h-100">
                                    <div class="card-body">
                                        <h6 class="card-title text-primary">üîí Data Portability</h6>
                                        <p class="small">You can request a copy of your data in a structured, machine-readable format.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h5 class="mb-3 mt-4">How to Exercise Your Rights</h5>
                        <p>To exercise any of these rights, please contact us at <strong>privacy@shopmax.com</strong>. We will respond to your request within 30 days.</p>
                    </section>

                    <!-- Cookies -->
                    <section id="cookies" class="mb-5">
                        <h2 class="h4 text-primary mb-3">7. Cookies and Tracking Technologies</h2>
                        
                        <h5 class="mb-3">7.1 What Are Cookies?</h5>
                        <p>Cookies are small text files stored on your device when you visit our platform. They help us provide, protect, and improve our services.</p>

                        <h5 class="mb-3">7.2 Types of Cookies We Use</h5>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Cookie Type</th>
                                        <th>Purpose</th>
                                        <th>Duration</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Essential Cookies</strong></td>
                                        <td>Required for basic platform functionality (login, security)</td>
                                        <td>Session or longer</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Performance Cookies</strong></td>
                                        <td>Help us understand how users interact with our platform</td>
                                        <td>Up to 2 years</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Functional Cookies</strong></td>
                                        <td>Remember your preferences and settings</td>
                                        <td>Up to 1 year</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Advertising Cookies</strong></td>
                                        <td>Deliver relevant advertisements (with consent)</td>
                                        <td>Up to 1 year</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h5 class="mb-3">7.3 Managing Cookies</h5>
                        <p>You can control cookies through your browser settings. However, disabling essential cookies may affect platform functionality.</p>
                        
                        <div class="alert alert-info">
                            <strong>Browser Controls:</strong> Most browsers allow you to refuse cookies, delete cookies, or be notified when cookies are set.
                        </div>
                    </section>

                    <!-- Data Retention -->
                    <section id="retention" class="mb-5">
                        <h2 class="h4 text-primary mb-3">8. Data Retention</h2>
                        
                        <p>We retain your personal information only for as long as necessary to fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required or permitted by law.</p>

                        <h5 class="mb-3">8.1 Retention Periods</h5>
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Data Type</th>
                                        <th>Retention Period</th>
                                        <th>Reason</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Account Information</strong></td>
                                        <td>While account is active + 3 years</td>
                                        <td>Service provision and legal compliance</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Transaction Records</strong></td>
                                        <td>7 years from transaction</td>
                                        <td>Legal and tax requirements</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Communication Data</strong></td>
                                        <td>3 years from last communication</td>
                                        <td>Customer service and dispute resolution</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Marketing Data</strong></td>
                                        <td>Until consent withdrawn + 1 year</td>
                                        <td>Marketing and analytics</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                    <!-- Children's Privacy -->
                    <section class="mb-5">
                        <h2 class="h4 text-primary mb-3">9. Children's Privacy</h2>
                        <p>ShopMax is not intended for users under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately.</p>
                    </section>

                    <!-- International Transfers -->
                    <section class="mb-5">
                        <h2 class="h4 text-primary mb-3">10. International Data Transfers</h2>
                        <p>Your information may be transferred to and processed in countries other than Uganda. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy.</p>
                    </section>

                    <!-- Changes to Policy -->
                    <section class="mb-5">
                        <h2 class="h4 text-primary mb-3">11. Changes to This Privacy Policy</h2>
                        <p>We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.</p>
                        
                        <div class="alert alert-warning">
                            <strong>Continued Use:</strong> Your continued use of the Platform after any changes constitutes acceptance of the updated Privacy Policy.
                        </div>
                    </section>

                    <!-- Contact Information -->
                    <section class="mb-5">
                        <h2 class="h4 text-primary mb-3">12. Contact Us</h2>
                        <p>If you have any questions about this Privacy Policy or our data practices, please contact us:</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card border-0 bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title">üìß Email</h6>
                                        <p class="mb-0">privacy@shopmax.com</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title">üìû Phone</h6>
                                        <p class="mb-0">+256 700 123 456</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card border-0 bg-light mt-3">
                            <div class="card-body">
                                <h6 class="card-title">üè¢ Address</h6>
                                <p class="mb-0">Uganda Christian University<br>Mukono, Uganda</p>
                            </div>
                        </div>
                    </section>

                    <!-- Data Protection Officer -->
                    <section class="text-center p-4 bg-primary text-white rounded">
                        <h4 class="mb-3">Data Protection Officer</h4>
                        <p class="mb-3">For specific data protection concerns, you can contact our Data Protection Officer directly at <strong>dpo@shopmax.com</strong></p>
                        <p class="small mb-0">We take your privacy seriously and are committed to protecting your personal information.</p>
                    </section>
                </div>
            </div>

            <!-- Related Policies -->
            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="card border-0 bg-light">
                        <div class="card-body text-center">
                            <i class="fas fa-file-contract fa-2x text-primary mb-3"></i>
                            <h5>Terms of Service</h5>
                            <p class="text-muted small">Our platform rules and user agreements</p>
                            <a href="{{ url_for('terms_of_service') }}" class="btn btn-outline-primary btn-sm">View Terms</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 bg-light">
                        <div class="card-body text-center">
                            <i class="fas fa-cookie fa-2x text-primary mb-3"></i>
                            <h5>Cookie Policy</h5>
                            <p class="text-muted small">Detailed information about our cookie usage</p>
                            <a href="{{ url_for('cookie_policy') }}" class="btn btn-outline-primary btn-sm">View Policy</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card border-0 bg-light">
                        <div class="card-body text-center">
                            <i class="fas fa-question-circle fa-2x text-primary mb-3"></i>
                            <h5>Help Center</h5>
                            <p class="text-muted small">Get help with privacy and security questions</p>
                            <a href="{{ url_for('help_center') }}" class="btn btn-outline-primary btn-sm">Get Help</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
section {
    scroll-margin-top: 100px;
}

.card {
    border-radius: 12px;
    transition: transform 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
}

.alert {
    border-radius: 8px;
    border: none;
}

.btn-outline-primary {
    border-radius: 20px;
}

h2, h3, h4, h5, h6 {
    color: var(--primary);
}

.table th {
    background-color: var(--light) !important;
    color: var(--dark);
}

.border-primary {
    border-color: var(--primary) !important;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add active class to navigation buttons when section is in view
    const sections = document.querySelectorAll('section');
    const navButtons = document.querySelectorAll('.btn-outline-primary');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                navButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('href') === `#${id}`) {
                        btn.classList.add('active');
                        btn.style.backgroundColor = 'var(--primary)';
                        btn.style.color = 'white';
                    } else {
                        btn.style.backgroundColor = '';
                        btn.style.color = '';
                    }
                });
            }
        });
    }, {
        threshold: 0.5,
        rootMargin: '-100px 0px -100px 0px'
    });

    sections.forEach(section => {
        observer.observe(section);
    });

    // Print functionality
    const printButton = document.createElement('button');
    printButton.innerHTML = '<i class="fas fa-print me-2"></i>Print Policy';
    printButton.className = 'btn btn-outline-secondary position-fixed';
    printButton.style.bottom = '20px';
    printButton.style.right = '20px';
    printButton.style.zIndex = '1000';
    
    printButton.addEventListener('click', function() {
        window.print();
    });
    
    document.body.appendChild(printButton);

    // Back to Top button
    const backToTopButton = document.createElement('button');
    backToTopButton.innerHTML = '<i class="fas fa-arrow-up"></i>';
    backToTopButton.className = 'btn btn-primary position-fixed';
    backToTopButton.style.bottom = '70px';
    backToTopButton.style.right = '20px';
    backToTopButton.style.zIndex = '1000';
    backToTopButton.style.width = '50px';
    backToTopButton.style.height = '50px';
    backToTopButton.style.borderRadius = '50%';
    backToTopButton.style.display = 'none';
    
    backToTopButton.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    document.body.appendChild(backToTopButton);

    // Show/hide back to top button
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            backToTopButton.style.display = 'block';
        } else {
            backToTopButton.style.display = 'none';
        }
    });

    // Add copy to clipboard for email addresses
    const emailElements = document.querySelectorAll('strong');
    emailElements.forEach(element => {
        if (element.textContent.includes('@')) {
            element.style.cursor = 'pointer';
            element.title = 'Click to copy email address';
            element.addEventListener('click', function() {
                const textArea = document.createElement('textarea');
                textArea.value = this.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                // Show copied notification
                const originalText = this.textContent;
                this.textContent = 'Copied!';
                setTimeout(() => {
                    this.textContent = originalText;
                }, 2000);
            });
        }
    });
});

// Print styles
</script>

<style media="print">
.btn, .alert, .card.shadow-sm, .position-fixed, .table-responsive {
    display: none !important;
}

.card {
    box-shadow: none !important;
    border: 1px solid #ddd !important;
}

body {
    font-size: 12pt;
    line-height: 1.4;
}

h1, h2, h3, h4, h5 {
    color: #000 !important;
}

a {
    color: #000 !important;
    text-decoration: none !important;
}

.table {
    border: 1px solid #000 !important;
}

.table th, .table td {
    border: 1px solid #000 !important;
}
</style>
{% endblock %}