{% extends "base.html" %}

{% block title %}Cookie Policy - ShopMax{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header Section -->
    <div class="row mb-5">
        <div class="col-lg-10 mx-auto text-center">
            <h1 class="display-4 fw-bold text-primary mb-4">Cookie Policy</h1>
            <p class="lead text-muted">Last updated: December 2024</p>
            <div class="alert alert-info">
                <i class="fas fa-cookie-bite me-2"></i>
                This Cookie Policy explains how ShopMax UCU uses cookies and similar technologies to recognize you when you visit our platform.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-10 mx-auto">
            <!-- Quick Navigation -->
            <div class="card shadow-sm mb-5">
                <div class="card-body">
                    <h5 class="card-title mb-3">Quick Navigation</h5>
                    <div class="d-flex flex-wrap gap-2">
                        <a href="#what-are-cookies" class="btn btn-outline-primary btn-sm">What are Cookies?</a>
                        <a href="#how-we-use" class="btn btn-outline-primary btn-sm">How We Use Cookies</a>
                        <a href="#types-of-cookies" class="btn btn-outline-primary btn-sm">Types of Cookies</a>
                        <a href="#manage-cookies" class="btn btn-outline-primary btn-sm">Managing Cookies</a>
                        <a href="#contact" class="btn btn-outline-primary btn-sm">Contact Us</a>
                    </div>
                </div>
            </div>

            <!-- What are Cookies -->
            <section id="what-are-cookies" class="mb-5">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-primary text-white rounded-circle p-3 me-3">
                        <i class="fas fa-info-circle fa-2x"></i>
                    </div>
                    <div>
                        <h2 class="h3 text-primary mb-1">What Are Cookies?</h2>
                        <p class="text-muted">Understanding how cookies work</p>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <p>Cookies are small text files that are placed on your computer, smartphone, or other device when you visit our website. They are widely used to make websites work more efficiently and provide information to the website owners.</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fas fa-check text-success me-3 mt-1"></i>
                                    <div>
                                        <h6>Small Text Files</h6>
                                        <p class="small text-muted mb-0">Tiny files stored on your device</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fas fa-check text-success me-3 mt-1"></i>
                                    <div>
                                        <h6>Website Memory</h6>
                                        <p class="small text-muted mb-0">Remember your preferences and settings</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fas fa-check text-success me-3 mt-1"></i>
                                    <div>
                                        <h6>Enhanced Experience</h6>
                                        <p class="small text-muted mb-0">Make browsing smoother and personalized</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fas fa-check text-success me-3 mt-1"></i>
                                    <div>
                                        <h6>Completely Safe</h6>
                                        <p class="small text-muted mb-0">Cannot contain viruses or malware</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How We Use Cookies -->
            <section id="how-we-use" class="mb-5">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-success text-white rounded-circle p-3 me-3">
                        <i class="fas fa-cookie fa-2x"></i>
                    </div>
                    <div>
                        <h2 class="h3 text-primary mb-1">How We Use Cookies</h2>
                        <p class="text-muted">Purposes of cookies on ShopMax</p>
                    </div>
                </div>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card h-100 border-success">
                            <div class="card-header bg-success text-white">
                                <i class="fas fa-user-circle me-2"></i>Essential Cookies
                            </div>
                            <div class="card-body">
                                <p class="card-text">These cookies are necessary for the website to function and cannot be switched off.</p>
                                <ul class="small">
                                    <li class="mb-2">Keep you logged in during your session</li>
                                    <li class="mb-2">Maintain shopping cart items</li>
                                    <li class="mb-2">Ensure secure transactions</li>
                                    <li>Remember privacy preferences</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100 border-info">
                            <div class="card-header bg-info text-white">
                                <i class="fas fa-chart-line me-2"></i>Analytics Cookies
                            </div>
                            <div class="card-body">
                                <p class="card-text">Help us understand how visitors interact with our website.</p>
                                <ul class="small">
                                    <li class="mb-2">Count visits and traffic sources</li>
                                    <li class="mb-2">Measure and improve performance</li>
                                    <li class="mb-2">Understand which pages are popular</li>
                                    <li>Identify technical issues</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100 border-warning">
                            <div class="card-header bg-warning text-dark">
                                <i class="fas fa-bullseye me-2"></i>Functionality Cookies
                            </div>
                            <div class="card-body">
                                <p class="card-text">Enable enhanced functionality and personalization.</p>
                                <ul class="small">
                                    <li class="mb-2">Remember your preferences</li>
                                    <li class="mb-2">Save language settings</li>
                                    <li class="mb-2">Store regional preferences</li>
                                    <li>Remember login details (if requested)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100 border-primary">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-ad me-2"></i>Advertising Cookies
                            </div>
                            <div class="card-body">
                                <p class="card-text">Used to make advertising more relevant to you and your interests.</p>
                                <ul class="small">
                                    <li class="mb-2">Show relevant products</li>
                                    <li class="mb-2">Measure ad campaign effectiveness</li>
                                    <li class="mb-2">Limit ad frequency</li>
                                    <li>Prevent showing ads you've seen</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Types of Cookies -->
            <section id="types-of-cookies" class="mb-5">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-warning text-white rounded-circle p-3 me-3">
                        <i class="fas fa-list-alt fa-2x"></i>
                    </div>
                    <div>
                        <h2 class="h3 text-primary mb-1">Types of Cookies We Use</h2>
                        <p class="text-muted">Detailed breakdown of cookies on ShopMax</p>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-primary">
                                    <tr>
                                        <th>Cookie Name</th>
                                        <th>Purpose</th>
                                        <th>Duration</th>
                                        <th>Type</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>session_id</code></td>
                                        <td>Maintain your login session</td>
                                        <td>Session</td>
                                        <td><span class="badge bg-success">Essential</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>cart_items</code></td>
                                        <td>Remember items in your shopping cart</td>
                                        <td>30 days</td>
                                        <td><span class="badge bg-success">Essential</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>user_preferences</code></td>
                                        <td>Store your language and display preferences</td>
                                        <td>1 year</td>
                                        <td><span class="badge bg-warning">Functional</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>_ga</code></td>
                                        <td>Google Analytics - distinguish users</td>
                                        <td>2 years</td>
                                        <td><span class="badge bg-info">Analytics</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>_gid</code></td>
                                        <td>Google Analytics - distinguish users</td>
                                        <td>24 hours</td>
                                        <td><span class="badge bg-info">Analytics</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>_fbp</code></td>
                                        <td>Facebook Pixel - ad delivery</td>
                                        <td>3 months</td>
                                        <td><span class="badge bg-primary">Advertising</span></td>
                                    </tr>
                                    <tr>
                                        <td><code>cookie_consent</code></td>
                                        <td>Remember your cookie preferences</td>
                                        <td>1 year</td>
                                        <td><span class="badge bg-success">Essential</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="alert alert-warning mt-4">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Note:</strong> Third-party cookies (like Google Analytics and Facebook Pixel) are subject to their respective privacy policies. We recommend reviewing their policies for more information.
                </div>
            </section>

            <!-- Managing Cookies -->
            <section id="manage-cookies" class="mb-5">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-info text-white rounded-circle p-3 me-3">
                        <i class="fas fa-cogs fa-2x"></i>
                    </div>
                    <div>
                        <h2 class="h3 text-primary mb-1">Managing Your Cookie Preferences</h2>
                        <p class="text-muted">You have control over cookies</p>
                    </div>
                </div>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-primary text-white">
                                <i class="fas fa-laptop me-2"></i>Browser Settings
                            </div>
                            <div class="card-body">
                                <p>Most web browsers allow you to control cookies through their settings preferences. However, limiting cookies may affect your experience on our website.</p>
                                <ul>
                                    <li class="mb-2">
                                        <strong>Google Chrome:</strong> Settings → Privacy and Security → Cookies and other site data
                                    </li>
                                    <li class="mb-2">
                                        <strong>Mozilla Firefox:</strong> Options → Privacy & Security → Cookies and Site Data
                                    </li>
                                    <li class="mb-2">
                                        <strong>Safari:</strong> Preferences → Privacy → Cookies and website data
                                    </li>
                                    <li>
                                        <strong>Microsoft Edge:</strong> Settings → Cookies and site permissions → Cookies and site data
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-success text-white">
                                <i class="fas fa-mobile-alt me-2"></i>Mobile Devices
                            </div>
                            <div class="card-body">
                                <p>You can manage cookies on your mobile device through your browser settings or device preferences.</p>
                                <ul>
                                    <li class="mb-2">
                                        <strong>iOS Safari:</strong> Settings → Safari → Privacy & Security → Block Cookies
                                    </li>
                                    <li class="mb-2">
                                        <strong>Android Chrome:</strong> Menu → Settings → Site settings → Cookies
                                    </li>
                                    <li>
                                        <strong>General:</strong> Look for "Privacy" or "Security" sections in your browser settings
                                    </li>
                                </ul>
                                <div class="alert alert-info mt-3">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    <strong>Tip:</strong> You can also use private/incognito browsing to limit cookie storage during your session.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cookie Consent Banner -->
                <div class="card mt-4 border-warning">
                    <div class="card-header bg-warning text-dark">
                        <i class="fas fa-cookie-bite me-2"></i>Our Cookie Consent Tool
                    </div>
                    <div class="card-body">
                        <p>We provide a cookie consent tool that allows you to customize your cookie preferences. You can access this tool at any time by clicking the "Cookie Settings" link in our website footer.</p>
                        <div class="row">
                            <div class="col-md-8">
                                <h6>What you can control:</h6>
                                <ul>
                                    <li class="mb-2">Essential cookies (required for basic functionality)</li>
                                    <li class="mb-2">Analytics cookies (help us improve our website)</li>
                                    <li class="mb-2">Functional cookies (enhance your experience)</li>
                                    <li>Advertising cookies (personalized ads)</li>
                                </ul>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="bg-light p-3 rounded border">
                                    <i class="fas fa-sliders-h fa-3x text-primary mb-2"></i>
                                    <p class="small mb-0">Adjust your preferences anytime</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Third-Party Cookies -->
            <section class="mb-5">
                <h2 class="h3 text-primary mb-4">Third-Party Cookies</h2>
                <div class="card border-0 bg-light">
                    <div class="card-body">
                        <p>We may use services from third parties that set cookies on our behalf to deliver their services. These include:</p>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fab fa-google text-primary me-3 mt-1"></i>
                                    <div>
                                        <h6>Google Analytics</h6>
                                        <p class="small text-muted mb-0">Website traffic analysis and reporting</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fab fa-facebook text-primary me-3 mt-1"></i>
                                    <div>
                                        <h6>Facebook Pixel</h6>
                                        <p class="small text-muted mb-0">Advertising and conversion tracking</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fab fa-stripe text-primary me-3 mt-1"></i>
                                    <div>
                                        <h6>Stripe</h6>
                                        <p class="small text-muted mb-0">Payment processing and security</p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-start mb-3">
                                    <i class="fas fa-map-marker-alt text-primary me-3 mt-1"></i>
                                    <div>
                                        <h6>Google Maps</h6>
                                        <p class="small text-muted mb-0">Location services and delivery mapping</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="alert alert-warning mt-3">
                            <i class="fas fa-external-link-alt me-2"></i>
                            These third-party services have their own privacy policies and cookie practices. We recommend reviewing their policies for comprehensive information.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Updates to Policy -->
            <section class="mb-5">
                <h2 class="h3 text-primary mb-4">Updates to This Policy</h2>
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <p>We may update this Cookie Policy from time to time to reflect changes in technology, legislation, or our services. When we make significant changes, we will:</p>
                        <ul>
                            <li class="mb-2">Update the "Last updated" date at the top of this policy</li>
                            <li class="mb-2">Notify registered users via email</li>
                            <li class="mb-2">Display a prominent notice on our website</li>
                            <li>Provide a summary of key changes</li>
                        </ul>
                        <p class="mb-0">We encourage you to review this policy periodically to stay informed about how we use cookies.</p>
                    </div>
                </div>
            </section>

            <!-- Contact Information -->
            <section id="contact" class="mb-5">
                <div class="d-flex align-items-center mb-4">
                    <div class="bg-danger text-white rounded-circle p-3 me-3">
                        <i class="fas fa-envelope fa-2x"></i>
                    </div>
                    <div>
                        <h2 class="h3 text-primary mb-1">Contact Us</h2>
                        <p class="text-muted">Questions about our Cookie Policy?</p>
                    </div>
                </div>

                <div class="card border-primary">
                    <div class="card-header bg-primary text-white">
                        <i class="fas fa-headset me-2"></i>Get In Touch
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Contact Information</h6>
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <i class="fas fa-envelope text-primary me-2"></i>
                                        <strong>Email:</strong> privacy@shopmax.com
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-phone text-primary me-2"></i>
                                        <strong>Phone:</strong> +256 700 123 456
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-map-marker-alt text-primary me-2"></i>
                                        <strong>Address:</strong> UCU Campus, Mukono, Uganda
                                    </li>
                                    <li>
                                        <i class="fas fa-clock text-primary me-2"></i>
                                        <strong>Hours:</strong> Mon-Fri, 8:00 AM - 5:00 PM EAT
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>Data Protection Officer</h6>
                                <p>For specific questions about data protection and privacy, you can contact our Data Protection Officer:</p>
                                <ul class="list-unstyled">
                                    <li class="mb-1">
                                        <i class="fas fa-user text-primary me-2"></i>
                                        <strong>Name:</strong> Privacy Team
                                    </li>
                                    <li>
                                        <i class="fas fa-envelope text-primary me-2"></i>
                                        <strong>Email:</strong> dpo@shopmax.com
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Final Note -->
            <div class="text-center p-4 bg-light rounded">
                <h5 class="text-primary mb-3">Thank you for trusting ShopMax UCU</h5>
                <p class="text-muted mb-3">We are committed to protecting your privacy and providing a safe, transparent shopping experience for our UCU community.</p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <a href="{{ url_for('privacy_policy') }}" class="btn btn-outline-primary">
                        <i class="fas fa-lock me-2"></i>Privacy Policy
                    </a>
                    <a href="{{ url_for('terms_of_service') }}" class="btn btn-outline-primary">
                        <i class="fas fa-file-contract me-2"></i>Terms of Service
                    </a>
                    <a href="{{ url_for('contact_us') }}" class="btn btn-primary">
                        <i class="fas fa-question-circle me-2"></i>Contact Support
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
section {
    scroll-margin-top: 100px;
}

.card {
    border-radius: 12px;
    transition: transform 0.2s ease;
}

.card:hover {
    transform: translateY(-2px);
}

.table th {
    border-top: none;
    font-weight: 600;
}

.badge {
    font-size: 0.75rem;
}

/* Smooth scrolling for anchor links */
html {
    scroll-behavior: smooth;
}

/* Print styles */
@media print {
    .btn, .alert, .card-header {
        display: none !important;
    }
    
    .card {
        border: 1px solid #ddd !important;
        box-shadow: none !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add active class to navigation buttons when section is in view
    const sections = document.querySelectorAll('section');
    const navButtons = document.querySelectorAll('.btn-outline-primary');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                navButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('href') === `#${id}`) {
                        btn.classList.add('active');
                    }
                });
            }
        });
    }, {
        threshold: 0.5,
        rootMargin: '-100px 0px -100px 0px'
    });

    sections.forEach(section => {
        observer.observe(section);
    });

    // Print functionality
    const printButton = document.createElement('button');
    printButton.innerHTML = '<i class="fas fa-print me-2"></i>Print Policy';
    printButton.className = 'btn btn-outline-secondary position-fixed';
    printButton.style.bottom = '20px';
    printButton.style.right = '20px';
    printButton.style.zIndex = '1000';
    
    printButton.addEventListener('click', function() {
        window.print();
    });
    
    document.body.appendChild(printButton);
});
</script>
{% endblock %}